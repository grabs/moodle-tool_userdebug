{"version":3,"file":"debuginfo.min.js","sources":["../src/debuginfo.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tool userdebug print a debug infobox\n *\n * @author      Andreas Grabs <info@grabs-edv.de>\n * @copyright   2018 onwards Grabs EDV {@link https://www.grabs-edv.de}\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport templates from 'core/templates';\nimport notification from 'core/notification';\n\n/**\n * Initialize a nice infobox to show the user, the user debug mode is active.\n * @param {object} infocontent This parameter is used as content for the template we want to render.\n */\nexport const init = (infocontent) => {\n    // Create the infobox container, which is a simple div element.\n    const banner = document.createElement('div');\n\n    // The mustache template we use for the infobox content.\n    const tmpl = 'tool_userdebug/debuginfo';\n\n    templates.render(tmpl, infocontent).then(function(html, js) {\n        banner.innerHTML = html;\n        banner.classList.add(\n            'tool-userdebug-infobox',\n            'border',\n            'rounded',\n            'bg-warning'\n        );\n        document.body.appendChild(banner);\n        if (js) {\n            templates.runTemplateJS(js);\n        }\n        // Make the box transparent but not invisible.\n        setTimeout(() => {\n            banner.classList.add('transparent');\n        }, 5000);\n        return;\n    }).fail(function(ex) {\n        if (ex.debuginfo) {\n            notification.exception(ex);\n        }\n    });\n};\n"],"names":["infocontent","banner","document","createElement","render","then","html","js","innerHTML","classList","add","body","appendChild","runTemplateJS","setTimeout","fail","ex","debuginfo","exception"],"mappings":";;;;;;;kMA8BqBA,oBAEXC,OAASC,SAASC,cAAc,0BAK5BC,OAFG,2BAEUJ,aAAaK,MAAK,SAASC,KAAMC,IACpDN,OAAOO,UAAYF,KACnBL,OAAOQ,UAAUC,IACb,yBACA,SACA,UACA,cAEJR,SAASS,KAAKC,YAAYX,QACtBM,uBACUM,cAAcN,IAG5BO,YAAW,KACPb,OAAOQ,UAAUC,IAAI,iBACtB,QAEJK,MAAK,SAASC,IACTA,GAAGC,iCACUC,UAAUF"}